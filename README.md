# SOCIAL NETWORKS API

This project is an exercise to show abilities and code quality with Ruby on Rails. It is an API that gets social networks data from the [Takehome](https://takehome.io/) API and provide it all together in the root path (`localhost:3000/`).

The project is currently using `ruby 2.7.2` and `rails 7.0.1`. Also, it was build without a database.

## GET THE PROJECT RUNNING
To get this project running, you can open your terminal, navigate to the directory where you want to download the poject and then run:
```
git clone git@github.com:DarlanSel/social-networks-api.git
```

After downloading the project, open the project root in your terminal, run `bundle install` to install dependencies, and then run `rails server` to start the server on the port `3000`. Now, you can access your [localhost](http://localhost:3000/) and see the results.


## PROJECT DEVELOPMENT HISTORY

After reading the exercise, I went to the terminal and started a new api project with the comand `rails new social-network --api --datase=postgresql`. But just after configuring the database, I realised that the persistence of data wouldn't be necessary and, removing database configuration, the application could run faster, since it doesn't have to deal with ActiveRecord. Then, I asked Diego if it was OK to build the application without a database and he confirmed.

So, I reacreted the app with:
```
rais new social-networks --api --skip-active-record -T
```
After that, I installed and configured rspec, and then I created a new controller with a `index` view with the command:
```
rails generate controller social_networks index
```
And configured the root path in the routes file.
I edited the autogenerated rspec test to test not just the status for the get request, but also to test the content returned.

Then I started searching about a way to getting the data from the API. There were two gems that looked interesting for this purpose: HTTParty and rest-client. HTTParty is a very interesting and useful gem, but I thought it would be too overpowered for the given scenario, so I choosed the rest-client gem to get the data.

After installing the gem, I wrote four classes to access and manipulate the data from the API. One of the classes is a father class, where I implemented all the generic code that would be usefull for getting data of all the three social networks. Each one of the three remaining classes is specilized in one of the three social networks and inherits from the father class. All this classes are placed in the `/lib/api` directory.

While I was implementing the API clients, I was also implementing the `social_networks#index` action, so I could test the results I was obtaining. The first implementaion in this action was very simple and straight forward. It was working, but it was also taking 1200ms to be completed. So, to fix this problem, I changed the action to put each request for the social networks in a different thread, making all the requests perform at the same time. With this, the average time for the action be completed decreased to 440ms.

To end the exercise, I improved the test cases with the `webmock` gem.

The title of the exercise says "Ruby Engineer 60 Minute Challenge", but it took me around 6 hours to get the exercise done. The reason for that was the lack of experience. I wanted to do everything right, so, for everything I implemented I had to search and study.
